# ------------------------------------------------------------------------------
# PRISM DASHBOARD - GLASS CARD TEMPLATE
# ------------------------------------------------------------------------------
# Dies ist die Standardkarte für Lichter, Schalter und Schlösser.
# Sie enthält die Logik für:
# 1. Glassmorphismus (Standard)
# 2. Neumorphismus (Eingedrückt bei Aktivität)
# 3. Icon Glow Effekte (Farbiges Leuchten je nach Entitätstyp)
# ------------------------------------------------------------------------------

type: custom:mushroom-entity-card
entity: light.example_light  # <-- DEINE ENTITÄT HIER
name: Wohnzimmer
icon: mdi:lightbulb
layout: horizontal
tap_action:
  action: toggle
hold_action:
  action: more-info
card_mod:
  style: |
    /* --- BASIS STYLE (GLAS) --- */
    ha-card {
      background: rgba(30, 32, 36, 0.6) !important;
      backdrop-filter: blur(12px) !important;
      -webkit-backdrop-filter: blur(12px) !important;
      border-radius: 16px !important;
      border: 1px solid rgba(255,255,255,0.05);
      border-top: 1px solid rgba(255, 255, 255, 0.15) !important;
      border-bottom: 1px solid rgba(0, 0, 0, 0.4) !important;
      box-shadow: 0 10px 20px -5px rgba(0, 0, 0, 0.5), 0 2px 4px rgba(0,0,0,0.3) !important;
      --primary-text-color: #e0e0e0;
      --secondary-text-color: #999;
      transition: all 0.2s ease-in-out;
      margin-bottom: 8px; width: 95% !important; margin-left: auto !important; margin-right: auto !important; min-height: 60px !important;
      display: flex; flex-direction: column; justify-content: center;
    }

    /* --- AKTIVER ZUSTAND (EINGEDRÜCKT) --- */
    {% if (is_state(config.entity, 'on') and not is_state(config.entity, 'unlocked')) or is_state(config.entity, 'locked') or is_state(config.entity, 'open') or is_state(config.entity, 'heat') or is_state(config.entity, 'auto') %}
      ha-card {
        background: rgba(20, 20, 20, 0.6) !important;
        box-shadow: inset 2px 2px 5px rgba(0,0,0,0.8), inset -1px -1px 2px rgba(255,255,255,0.1) !important;
        border-top: 1px solid rgba(0,0,0,0.1) !important;
        border-bottom: 1px solid rgba(255,255,255,0.05) !important;
        transform: translateY(2px);
      }
    {% endif %}

    /* --- ICON GLOW EFFEKTE --- */
    
    /* 1. SCHLÖSSER (Grün=Zu, Rot=Offen) */
    {% if config.entity.startswith('lock.') %}
      {% if is_state(config.entity, 'locked') %}
         mushroom-shape-icon {
          --icon-color: rgb(76, 175, 80) !important;
          --shape-color: rgba(76, 175, 80, 0.2) !important;
          filter: drop-shadow(0 0 6px rgba(76, 175, 80, 0.6));
        }
      {% elif is_state(config.entity, 'unlocked') %}
         mushroom-shape-icon {
          --icon-color: rgb(244, 67, 54) !important;
          --shape-color: rgba(244, 67, 54, 0.2) !important;
          filter: drop-shadow(0 0 6px rgba(244, 67, 54, 0.6));
        }
      {% endif %}
    
    /* 2. HEIZUNG / KLIMA (Orange) */
    {% elif config.entity.startswith('climate.') %}
       {% if is_state(config.entity, 'heat') or is_state(config.entity, 'auto') %}
        mushroom-shape-icon {
          --icon-color: rgb(255, 152, 0) !important;
          --shape-color: rgba(255, 152, 0, 0.2) !important;
          filter: drop-shadow(0 0 6px rgba(255, 152, 0, 0.6));
        }
       {% endif %}
    
    /* 3. STANDARD LICHT/SWITCH (Gelb/Orange) */
    {% else %}
      {% if is_state(config.entity, 'on') or is_state(config.entity, 'open') %}
        mushroom-shape-icon {
          --icon-color: rgb(255, 200, 100) !important;
          --shape-color: rgba(255, 200, 100, 0.2) !important;
          filter: drop-shadow(0 0 6px rgba(255, 200, 100, 0.6));
        }
      {% endif %}
    {% endif %}

    ha-card:active { transform: scale(0.98); }